#!/bin/bash

iai info "this script should discover the audio libs available on the system"

#TODO esto solo serve para iaibox
AUDIO_LIBS_PATH="/home/lolo/Proxectos/audio-libs"
iai warn "assuming audio-libs store is located at $AUDIO_LIBS_PATH"

LOCAL_LIBS_PATH=~/.iai/audio-libs
mkdir -p $LOCAL_LIBS_PATH
iai info "Stored symlink lists will be at $LOCAL_LIBS_PATH"

file_discover () {
    local STORE_PATH="$LOCAL_LIBS_PATH/$1"
    iai info "Searching for *.$1 soundfonts..."
    rm -rf "$STORE_PATH" && mkdir -p "$STORE_PATH"
    find $AUDIO_LIBS_PATH -name "*.$1" -exec ln -s "{}" "$STORE_PATH" \;
    iai info "Created $(ls -l $STORE_PATH | grep "^l" | wc -l) links at $STORE_PATH"
}

file_discover "sfz"
file_discover "sf2"

