#!/usr/bin/env node

// VERBOSE REQUIRE

function verboseRequire( ref ){
  try {
    var file = require.resolve( ref );
  } catch( err ) {
    throw Error(
      "given '" + ref + "', require.resolve should not throw\n"
      + err.stack
    );
  }
  try {
    return require( file );
  } catch( err ) {
    throw Error(
      "given '" + file + "', require should not throw\n"
      + err.stack.split('\n').slice(5).join('\n')
    );
  }
}

// DEPENDENCIES

var iai = verboseRequire('iai');

// WORKING FROM HERE

// ARGV
// TODO better argv description

var argv = process.argv.slice( 2 );
if( argv.length == 1 && (argv[0] == '--help' || argv[0] == '--usage') ){
  info('Usage: iai [optional input]');
  process.exit(1);
}

console.log( 'hi there @', Date() );
console.log( 'cwd is', process.cwd() );

iai.operation('bootstrap');

