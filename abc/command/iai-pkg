assert_function iai || exit

function iai-pkg () {
	test -z "$1" && fail "missing argument: %s" 'action to do'
	test -z "$2" && fail "missing argument: %s" 'package term'

	local mode="unknown"
	if which apt &>/dev/null; then
		mode="apt"
	elif which pacman &>/dev/null; then
		mode="pacman"
	else
		fail "could not detect the system package tool"
	fi
	info "will use %s as system package management tool" "$mode"

	action="iai-pkg.$mode.$1"
	assert_function $action
	$action "$2"
}

iai-pkg.apt.search () { apt search "$@"; }
iai-pkg.apt.install () { sudo apt install "$@"; }

iai-pkg.pacman.search () { pacman -Ss "$@"; }
iai-pkg.pacman.install () { sudo pacman -S "$@"; }

##
# vim modeline
# /* vim: set filetype=sh ts=2 shiftwidth=2: */
